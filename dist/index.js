"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.countries=[{name:"None Country",code:"NA",dialCode:"",mask:""},{name:"Russia",code:"RU",dialCode:"+7",mask:"+7 (___) ___-__-__"},{name:"Kazakhstan",code:"KZ",dialCode:"+7",mask:"+7 (___) ___-__-__"},{name:"Belarus",code:"BY",dialCode:"+375",mask:"+375 (__) ___-__-__"},{name:"Uzbekistan",code:"UZ",dialCode:"+998",mask:"+998 (__) ___-__-__"},{name:"Tajikistan",code:"TJ",dialCode:"+992",mask:"+992 (__) ___-__-__"},{name:"Kyrgyzstan",code:"KG",dialCode:"+996",mask:"+996 (___) ___-___"},{name:"Armenia",code:"AM",dialCode:"+374",mask:"+374 (__) ___-___"},{name:"Azerbaijan",code:"AZ",dialCode:"+994",mask:"+994 (__) ___-__-__"},{name:"Moldova",code:"MD",dialCode:"+373",mask:"+373 (__) ___-___"},{name:"Turkmenistan",code:"TM",dialCode:"+993",mask:"+993 (__) ___-___"},{name:"Albania",code:"AL",dialCode:"+355",mask:"+355 (__) ___-___"},{name:"Andorra",code:"AD",dialCode:"+376",mask:"+376 ___-___"},{name:"Austria",code:"AT",dialCode:"+43",mask:"+43 (__) ___-____"},{name:"Belarus",code:"BY",dialCode:"+375",mask:"+375 (__) ___-__-__"},{name:"Belgium",code:"BE",dialCode:"+32",mask:"+32 (__) ___-__-__"},{name:"Bosnia and Herzegovina",code:"BA",dialCode:"+387",mask:"+387 (__) ___-___"},{name:"Bulgaria",code:"BG",dialCode:"+359",mask:"+359 (__) ___-___"},{name:"Croatia",code:"HR",dialCode:"+385",mask:"+385 (__) ___-___"},{name:"Cyprus",code:"CY",dialCode:"+357",mask:"+357 __-___-___"},{name:"Czech Republic",code:"CZ",dialCode:"+420",mask:"+420 ___-___-___"},{name:"Denmark",code:"DK",dialCode:"+45",mask:"+45 __ __ __ __"},{name:"Estonia",code:"EE",dialCode:"+372",mask:"+372 ___-____"},{name:"Finland",code:"FI",dialCode:"+358",mask:"+358 __ ___ ____"},{name:"France",code:"FR",dialCode:"+33",mask:"+33 _ __ __ __ __"},{name:"Germany",code:"DE",dialCode:"+49",mask:"+49 (___) ___-____"},{name:"Greece",code:"GR",dialCode:"+30",mask:"+30 ___ ___ ____"},{name:"Hungary",code:"HU",dialCode:"+36",mask:"+36 (__) ___-___"},{name:"Iceland",code:"IS",dialCode:"+354",mask:"+354 ___-____"},{name:"Ireland",code:"IE",dialCode:"+353",mask:"+353 (__) ___-___"},{name:"Italy",code:"IT",dialCode:"+39",mask:"+39 ___ ___ ____"},{name:"Latvia",code:"LV",dialCode:"+371",mask:"+371 ___-____"},{name:"Liechtenstein",code:"LI",dialCode:"+423",mask:"+423 ___-____"},{name:"Lithuania",code:"LT",dialCode:"+370",mask:"+370 (__) ___-___"},{name:"Luxembourg",code:"LU",dialCode:"+352",mask:"+352 ___-___-___"},{name:"Malta",code:"MT",dialCode:"+356",mask:"+356 ___-____"},{name:"Moldova",code:"MD",dialCode:"+373",mask:"+373 (__) ___-___"},{name:"Monaco",code:"MC",dialCode:"+377",mask:"+377 ___-___-___"},{name:"Montenegro",code:"ME",dialCode:"+382",mask:"+382 (__) ___-___"},{name:"Netherlands",code:"NL",dialCode:"+31",mask:"+31 (__) ___-____"},{name:"North Macedonia",code:"MK",dialCode:"+389",mask:"+389 (__) ___-___"},{name:"Norway",code:"NO",dialCode:"+47",mask:"+47 ___ __ ___"},{name:"Poland",code:"PL",dialCode:"+48",mask:"+48 ___-___-___"},{name:"Portugal",code:"PT",dialCode:"+351",mask:"+351 ___-___-___"},{name:"Romania",code:"RO",dialCode:"+40",mask:"+40 ___-___-___"},{name:"Russia",code:"RU",dialCode:"+7",mask:"+7 (___) ___-__-__"},{name:"San Marino",code:"SM",dialCode:"+378",mask:"+378 ___-___"},{name:"Serbia",code:"RS",dialCode:"+381",mask:"+381 (__) ___-___"},{name:"Slovakia",code:"SK",dialCode:"+421",mask:"+421 (__) ___-___"},{name:"Slovenia",code:"SI",dialCode:"+386",mask:"+386 (__) ___-___"},{name:"Spain",code:"ES",dialCode:"+34",mask:"+34 ___ ___ ___"},{name:"Sweden",code:"SE",dialCode:"+46",mask:"+46 (__) ___-____"},{name:"Switzerland",code:"CH",dialCode:"+41",mask:"+41 (__) ___-__-__"},{name:"Turkey",code:"TR",dialCode:"+90",mask:"+90 (___) ___-____"},{name:"Ukraine",code:"UA",dialCode:"+380",mask:"+380 (__) ___-__-__"},{name:"United Kingdom",code:"GB",dialCode:"+44",mask:"+44 ____ ___ ___"},{name:"Vatican City",code:"VA",dialCode:"+379",mask:"+379 ___-___"},{name:"Afghanistan",code:"AF",dialCode:"+93",mask:"+93 (__) ___-___"},{name:"Bahrain",code:"BH",dialCode:"+973",mask:"+973 ____ ____"},{name:"Bangladesh",code:"BD",dialCode:"+880",mask:"+880 ____-______"},{name:"Bhutan",code:"BT",dialCode:"+975",mask:"+975 __ ______"},{name:"Brunei",code:"BN",dialCode:"+673",mask:"+673 ____ ____"},{name:"Cambodia",code:"KH",dialCode:"+855",mask:"+855 (__) ___-___"},{name:"China",code:"CN",dialCode:"+86",mask:"+86 ____ ____ ____"},{name:"Cyprus",code:"CY",dialCode:"+357",mask:"+357 ___-____"},{name:"Georgia",code:"GE",dialCode:"+995",mask:"+995 ___ ___ ___"},{name:"India",code:"IN",dialCode:"+91",mask:"+91 _____-_____ "},{name:"Indonesia",code:"ID",dialCode:"+62",mask:"+62 ____-______"},{name:"Iran",code:"IR",dialCode:"+98",mask:"+98 ___ ___ ____"},{name:"Iraq",code:"IQ",dialCode:"+964",mask:"+964 ___ ___ ___"},{name:"Israel",code:"IL",dialCode:"+972",mask:"+972 __-___-____"},{name:"Japan",code:"JP",dialCode:"+81",mask:"+81 __-____-____"},{name:"Jordan",code:"JO",dialCode:"+962",mask:"+962 ___ ___ ___"},{name:"Kuwait",code:"KW",dialCode:"+965",mask:"+965 ____ ____"},{name:"Laos",code:"LA",dialCode:"+856",mask:"+856 ___ ___ ___"},{name:"Lebanon",code:"LB",dialCode:"+961",mask:"+961 __ ___ ___"},{name:"Malaysia",code:"MY",dialCode:"+60",mask:"+60 __-___ ____"},{name:"Maldives",code:"MV",dialCode:"+960",mask:"+960 ___ ___"},{name:"Mongolia",code:"MN",dialCode:"+976",mask:"+976 ___ ___ ___"},{name:"Myanmar",code:"MM",dialCode:"+95",mask:"+95 __-___-___"},{name:"Nepal",code:"NP",dialCode:"+977",mask:"+977 ___-___-___"},{name:"North Korea",code:"KP",dialCode:"+850",mask:"+850 __-___-___"},{name:"Oman",code:"OM",dialCode:"+968",mask:"+968 ___ ___ ___"},{name:"Palestine",code:"PS",dialCode:"+970",mask:"+970 ___ ___ ___"},{name:"Philippines",code:"PH",dialCode:"+63",mask:"+63 ___ ___ ____"},{name:"Qatar",code:"QA",dialCode:"+974",mask:"+974 ____ ____"},{name:"Saudi Arabia",code:"SA",dialCode:"+966",mask:"+966 ___ ___ ___"},{name:"Singapore",code:"SG",dialCode:"+65",mask:"+65 ____ ____"},{name:"South Korea",code:"KR",dialCode:"+82",mask:"+82 __-___-____"},{name:"Sri Lanka",code:"LK",dialCode:"+94",mask:"+94 __-___ ____"},{name:"Syria",code:"SY",dialCode:"+963",mask:"+963 ___ ___ ___"},{name:"Taiwan",code:"TW",dialCode:"+886",mask:"+886 __-___-____"},{name:"Thailand",code:"TH",dialCode:"+66",mask:"+66 __ ___ ____"},{name:"Timor-Leste",code:"TL",dialCode:"+670",mask:"+670 ___ ___ ___"},{name:"Turkey",code:"TR",dialCode:"+90",mask:"+90 ___ ___ __ __"},{name:"United Arab Emirates",code:"AE",dialCode:"+971",mask:"+971 ___ ___ ___"},{name:"Vietnam",code:"VN",dialCode:"+84",mask:"+84 ___ ___ ____"},{name:"Yemen",code:"YE",dialCode:"+967",mask:"+967 ___ ___ ___"},{name:"Algeria",code:"DZ",dialCode:"+213",mask:"+213 ___ ___ ___"},{name:"Angola",code:"AO",dialCode:"+244",mask:"+244 ___ ___ ___"},{name:"Benin",code:"BJ",dialCode:"+229",mask:"+229 ____ ____"},{name:"Botswana",code:"BW",dialCode:"+267",mask:"+267 ___ ____"},{name:"Burkina Faso",code:"BF",dialCode:"+226",mask:"+226 __ __ __ __"},{name:"Burundi",code:"BI",dialCode:"+257",mask:"+257 ___ ___ ___"},{name:"Cameroon",code:"CM",dialCode:"+237",mask:"+237 ___ ___ ___"},{name:"Cape Verde",code:"CV",dialCode:"+238",mask:"+238 ___ ___"},{name:"Central African Republic",code:"CF",dialCode:"+236",mask:"+236 __ __ __ __"},{name:"Chad",code:"TD",dialCode:"+235",mask:"+235 __ __ __ __"},{name:"Comoros",code:"KM",dialCode:"+269",mask:"+269 __ __ __"},{name:"Congo (Brazzaville)",code:"CG",dialCode:"+242",mask:"+242 ___ ___ ___"},{name:"Congo (Kinshasa)",code:"CD",dialCode:"+243",mask:"+243 ___ ___ ___"},{name:"Djibouti",code:"DJ",dialCode:"+253",mask:"+253 __ __ __ __"},{name:"Egypt",code:"EG",dialCode:"+20",mask:"+20 __ ___ ___"},{name:"Equatorial Guinea",code:"GQ",dialCode:"+240",mask:"+240 ___ ___ ___"},{name:"Eritrea",code:"ER",dialCode:"+291",mask:"+291 __ __ __"},{name:"Eswatini",code:"SZ",dialCode:"+268",mask:"+268 ___ ___ ___"},{name:"Ethiopia",code:"ET",dialCode:"+251",mask:"+251 __ ___ ____"},{name:"Gabon",code:"GA",dialCode:"+241",mask:"+241 ___ ___ ___"},{name:"Gambia",code:"GM",dialCode:"+220",mask:"+220 ___ ___"},{name:"Ghana",code:"GH",dialCode:"+233",mask:"+233 ___ ___ ___"},{name:"Guinea",code:"GN",dialCode:"+224",mask:"+224 ___ ___ ___"},{name:"Guinea-Bissau",code:"GW",dialCode:"+245",mask:"+245 ___ ___ ___"},{name:"Ivory Coast",code:"CI",dialCode:"+225",mask:"+225 ___ ___ ___"},{name:"Kenya",code:"KE",dialCode:"+254",mask:"+254 ___ ___ ___"},{name:"Lesotho",code:"LS",dialCode:"+266",mask:"+266 ___ ___ ___"},{name:"Liberia",code:"LR",dialCode:"+231",mask:"+231 ___ ___ ___"},{name:"Libya",code:"LY",dialCode:"+218",mask:"+218 __ ___ ___"},{name:"Madagascar",code:"MG",dialCode:"+261",mask:"+261 __ __ __ __"},{name:"Malawi",code:"MW",dialCode:"+265",mask:"+265 __ ___ ___"},{name:"Mali",code:"ML",dialCode:"+223",mask:"+223 ___ ___ ___"},{name:"Mauritania",code:"MR",dialCode:"+222",mask:"+222 ___ ___ ___"},{name:"Mauritius",code:"MU",dialCode:"+230",mask:"+230 ___ ___ ___"},{name:"Morocco",code:"MA",dialCode:"+212",mask:"+212 ___ ___ ___"},{name:"Mozambique",code:"MZ",dialCode:"+258",mask:"+258 ___ ___ ___"},{name:"Namibia",code:"NA",dialCode:"+264",mask:"+264 __ ___ ___"},{name:"Niger",code:"NE",dialCode:"+227",mask:"+227 ___ ___ ___"},{name:"Nigeria",code:"NG",dialCode:"+234",mask:"+234 ___ ___ ___"},{name:"Rwanda",code:"RW",dialCode:"+250",mask:"+250 ___ ___ ___"},{name:"Sao Tome and Principe",code:"ST",dialCode:"+239",mask:"+239 ___ ___"},{name:"Senegal",code:"SN",dialCode:"+221",mask:"+221 ___ ___ ___"},{name:"Seychelles",code:"SC",dialCode:"+248",mask:"+248 ___ ___"},{name:"Sierra Leone",code:"SL",dialCode:"+232",mask:"+232 ___ ___ ___"},{name:"Somalia",code:"SO",dialCode:"+252",mask:"+252 ___ ___ ___"},{name:"South Africa",code:"ZA",dialCode:"+27",mask:"+27 ___ ___ ___"},{name:"South Sudan",code:"SS",dialCode:"+211",mask:"+211 ___ ___ ___"},{name:"Sudan",code:"SD",dialCode:"+249",mask:"+249 ___ ___ ___"},{name:"Tanzania",code:"TZ",dialCode:"+255",mask:"+255 ___ ___ ___"},{name:"Togo",code:"TG",dialCode:"+228",mask:"+228 ___ ___ ___"},{name:"Tunisia",code:"TN",dialCode:"+216",mask:"+216 ___ ___ ___"},{name:"Uganda",code:"UG",dialCode:"+256",mask:"+256 ___ ___ ___"},{name:"Zambia",code:"ZM",dialCode:"+260",mask:"+260 ___ ___ ___"},{name:"Zimbabwe",code:"ZW",dialCode:"+263",mask:"+263 ___ ___ ___"},{name:"Antigua and Barbuda",code:"AG",dialCode:"+1-268",mask:"+1-268 ___-____"},{name:"Bahamas",code:"BS",dialCode:"+1-242",mask:"+1-242 ___-____"},{name:"Barbados",code:"BB",dialCode:"+1-246",mask:"+1-246 ___-____"},{name:"Belize",code:"BZ",dialCode:"+501",mask:"+501 ___-____"},{name:"Canada",code:"CA",dialCode:"+1",mask:"+1 ___ ___ ____"},{name:"Costa Rica",code:"CR",dialCode:"+506",mask:"+506 ___ ____"},{name:"Cuba",code:"CU",dialCode:"+53",mask:"+53 ___ ____"},{name:"Dominica",code:"DM",dialCode:"+1-767",mask:"+1-767 ___-____"},{name:"Dominican Republic",code:"DO",dialCode:"+1-809",mask:"+1-809 ___-____"},{name:"El Salvador",code:"SV",dialCode:"+503",mask:"+503 ____ ____"},{name:"Grenada",code:"GD",dialCode:"+1-473",mask:"+1-473 ___-____"},{name:"Guatemala",code:"GT",dialCode:"+502",mask:"+502 ____ ____"},{name:"Haiti",code:"HT",dialCode:"+509",mask:"+509 ___ ____"},{name:"Honduras",code:"HN",dialCode:"+504",mask:"+504 ____ ____"},{name:"Jamaica",code:"JM",dialCode:"+1-876",mask:"+1-876 ___-____"},{name:"Mexico",code:"MX",dialCode:"+52",mask:"+52 ___ ___ ____"},{name:"Nicaragua",code:"NI",dialCode:"+505",mask:"+505 ____ ____"},{name:"Panama",code:"PA",dialCode:"+507",mask:"+507 ___ ____"},{name:"Saint Kitts and Nevis",code:"KN",dialCode:"+1-869",mask:"+1-869 ___-____"},{name:"Saint Lucia",code:"LC",dialCode:"+1-758",mask:"+1-758 ___-____"},{name:"Saint Vincent and the Grenadines",code:"VC",dialCode:"+1-784",mask:"+1-784 ___-____"},{name:"Trinidad and Tobago",code:"TT",dialCode:"+1-868",mask:"+1-868 ___-____"},{name:"United States",code:"US",dialCode:"+1",mask:"+1 ___ ___ ____"},{name:"Argentina",code:"AR",dialCode:"+54",mask:"+54 __ ___-____"},{name:"Bolivia",code:"BO",dialCode:"+591",mask:"+591 ___ ___ ___"},{name:"Brazil",code:"BR",dialCode:"+55",mask:"+55 __ ____-____"},{name:"Chile",code:"CL",dialCode:"+56",mask:"+56 _ ____ ____"},{name:"Colombia",code:"CO",dialCode:"+57",mask:"+57 ___ ___ ____"},{name:"Ecuador",code:"EC",dialCode:"+593",mask:"+593 __ ___ ____"},{name:"Guyana",code:"GY",dialCode:"+592",mask:"+592 ___ ____"},{name:"Paraguay",code:"PY",dialCode:"+595",mask:"+595 ___ ___ ___"},{name:"Peru",code:"PE",dialCode:"+51",mask:"+51 __ ___ ____"},{name:"Suriname",code:"SR",dialCode:"+597",mask:"+597 ___ ____"},{name:"Uruguay",code:"UY",dialCode:"+598",mask:"+598 __ ___ ___"},{name:"Venezuela",code:"VE",dialCode:"+58",mask:"+58 ___ ___ ____"},{name:"Australia",code:"AU",dialCode:"+61",mask:"+61 _ ____ ____"},{name:"Fiji",code:"FJ",dialCode:"+679",mask:"+679 ____ ____"},{name:"Kiribati",code:"KI",dialCode:"+686",mask:"+686 ___ ____"},{name:"Marshall Islands",code:"MH",dialCode:"+692",mask:"+692 ___ ____"},{name:"Micronesia",code:"FM",dialCode:"+691",mask:"+691 ___ ____"},{name:"Nauru",code:"NR",dialCode:"+674",mask:"+674 ___ ____"},{name:"New Zealand",code:"NZ",dialCode:"+64",mask:"+64 __ ___ ____"},{name:"Palau",code:"PW",dialCode:"+680",mask:"+680 ___ ____"},{name:"Papua New Guinea",code:"PG",dialCode:"+675",mask:"+675 ___ ____"},{name:"Samoa",code:"WS",dialCode:"+685",mask:"+685 __ ____"},{name:"Solomon Islands",code:"SB",dialCode:"+677",mask:"+677 ___ ____"},{name:"Tonga",code:"TO",dialCode:"+676",mask:"+676 ___ ____"},{name:"Tuvalu",code:"TV",dialCode:"+688",mask:"+688 ___ ____"},{name:"Vanuatu",code:"VU",dialCode:"+678",mask:"+678 ___ ____"}],exports.default=function({container:_,countries:e,spritePath:a="./icons/sprite.svg"}){const d=document.createElement("div");d.className="phone-input-wrapper";const o=document.createElement("div");o.className="country-dropdown";const n=document.createElement("button");n.className="current-country",n.type="button";const i=document.createElement("div");i.className="country-options";const m=_.dataset.name,s=_.dataset.id;let l=e.find((_=>"na"===_.code))||e[0],c=l.mask,t=l.dialCode,C=""!==c;function k(){i.innerHTML="",e.forEach((_=>{const e=document.createElement("button");e.type="button",e.className="country-option",_.code===l.code&&e.classList.add("selected"),e.dataset.code=_.code,e.dataset.mask=_.mask,e.dataset.dialCode=_.dialCode,e.innerHTML=`\n          <svg><use href="${a}#${_.code}" /></svg>\n          <span>${_.name}</span>\n        `,i.appendChild(e)}))}function r(){n.innerHTML=`\n          <svg><use href="${a}#${l.code}" /></svg>\n          <span>${l.code}</span>\n        `}k(),r(),o.appendChild(n),o.appendChild(i);const u=document.createElement("input");u.type="tel",u.placeholder=c,u.value=C?c:"",m&&(u.name=m),s&&(u.id=s),d.appendChild(o),d.appendChild(u),_.appendChild(d);let p=u.value;function h(_,e,a=!1){_.setSelectionRange&&(a||_.focus(),_.setSelectionRange(e,e))}function g(_){return"_"===_}return n.addEventListener("click",(()=>{i.classList.toggle("visible")})),i.addEventListener("click",(_=>{const a=_.target.closest(".country-option");if(!a)return;i.querySelectorAll(".country-option").forEach((_=>{_.classList.remove("selected")})),a.classList.add("selected");const d=a.dataset.code,o=a.dataset.mask,n=a.dataset.dialCode;if(l=e.find((_=>_.code===d)),c=o,t=n,C=""!==o,u.placeholder=C?o:"",u.value=C?o:"",p=u.value,r(),i.classList.remove("visible"),C){const _=u.value.indexOf("_",t.length);h(u,-1===_?u.value.length:_)}})),async function(){try{const _=await fetch("https://ipapi.co/country/");if(!_.ok)throw new Error(`HTTP error! status: ${_.status}`);_.headers.get("RateLimit-Limit");const a=_.headers.get("RateLimit-Remaining");_.headers.get("RateLimit-Reset");a&&parseInt(a)<=0&&console.warn("API free quota exhausted");const d=(await _.text()).toLowerCase(),o=e.find((_=>_.code===d.toUpperCase()));if(o)l=o,c=o.mask,t=o.dialCode,C=""!==o.mask;else{const _=e.find((_=>"NA"===_.code));_&&(l=_,c="",t="",C=!1)}if(u.placeholder=c,u.value=C?c:"",p=u.value,r(),k(),C){const _=u.value.indexOf("_",t.length);h(u,-1===_?u.value.length:_,!0)}}catch(_){console.error("Geo detection failed:",_);const a=e.find((_=>"na"===_.code));a&&(l=a,c="",t="",C=!1,u.placeholder="",u.value="",p="",r(),k())}}(),u.addEventListener("focus",(()=>{if(C&&(""===u.value||u.value===t+" ")){u.value=c;const _=c.indexOf("_",t.length);h(u,-1===_?c.length:_),p=u.value}})),u.addEventListener("keydown",(_=>{if(!C)return;const e=u.selectionStart||0,a=_.key;if("Backspace"===a||"Delete"===a){_.preventDefault();const d="Backspace"===a?"backspace":"delete",{newValue:o,newPos:n}=function(_,e,a,d){const o=_.split("");if("backspace"===d){if(e<=a)return{newValue:_,newPos:a};let d=e-1;for(;d>=a&&!/\d/.test(o[d]);)d--;return d<a?{newValue:_,newPos:a}:(o[d]="_",{newValue:o.join(""),newPos:d})}{if(e<a)return{newValue:_,newPos:a};let d=e;for(;d<o.length&&!/\d/.test(o[d]);)d++;return d>=o.length?{newValue:_,newPos:o.length}:(o[d]="_",{newValue:o.join(""),newPos:d})}}(u.value,e,t.length,d);u.value=o,h(u,n),p=o}})),u.addEventListener("input",(()=>{if(!C)return void(u.value=u.value.replace(/\D/g,""));if(!u.value.startsWith(t)){const _=u.value.replace(/\D/g,"");return u.value=t+" "+_.slice(t.replace(/\D/g,"").length),h(u,u.value.length),void(p=u.value)}const _=u.selectionStart||0,e=u.value[_-1];if(!/\d/.test(e))return u.value=p,void h(u,_-1);const{newValue:a,newPos:d}=function(_,e,a,d){const o=_.split("");let n=e;for(;n<d.length&&!g(d[n]);)n++;if(n>=d.length)return{newValue:_,newPos:e};o[n]=a;let i=n+1;for(;i<d.length&&!g(d[i]);)i++;return i>d.length&&(i=d.length),{newValue:o.join(""),newPos:i}}(p,_-1,e,c);u.value=a,h(u,d),p=a})),u.addEventListener("mousedown",(_=>{if(C&&u.value===c){_.preventDefault();const e=c.indexOf("_",t.length);setTimeout((()=>h(u,-1===e?c.length:e)),0)}})),u.addEventListener("paste",(_=>{var e;if(!C)return;_.preventDefault();const a=((null===(e=_.clipboardData)||void 0===e?void 0:e.getData("text"))||"").replace(/\D/g,"");let d=u.value.split(""),o=c,n=t.length;for(let _ of a){for(;n<o.length&&"_"!==o[n];)n++;if(n>=o.length)break;d[n]=_,n++}const i=d.join("");u.value=i;let m=i.indexOf("_");-1===m&&(m=i.length),h(u,m),p=i})),document.addEventListener("click",(_=>{o.contains(_.target)||i.classList.remove("visible")})),{addCountries:function(_){const a=new Set(e.map((_=>_.code)));_.forEach((_=>{a.has(_.code)||e.push(_)})),k()}}};
